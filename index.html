<!DOCTYPE html>
<html lang="hy">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Դասընթացների փաթեթի արժեքի հաշվիչ</title>
    <style>
    /* ===== RESET & BASE STYLES ===== */
    * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
        font-family: Arial, sans-serif;
    }

    body {
        background-color: #f8f9fa;
        color: #333;
        line-height: 1.6;
        padding: 15px;
        font-family: Arial, sans-serif;
    }

    /* ===== CALCULATOR PAGE CONTAINER ===== */
    .course-calculator-page {
        max-width: 900px;
        margin: 15px auto;
        padding: 15px 20px;
        background: white;
        border-radius: 18px;
        box-shadow: 0 15px 40px rgba(0, 0, 0, 0.08);
        font-family: Arial, sans-serif;
    }

    /* ===== HEADER ===== */
    .calculator-header {
        text-align: center;
        margin-bottom: 20px;
    }

    .calculator-header h1 {
        font-size: 1.8rem;
        margin-bottom: 15px;
        color: #1a365d;
        background: linear-gradient(135deg, #1a365d 0%, #2d6bcc 100%);
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
        line-height: 1.2;
        font-family: Arial, sans-serif;
    }

    .calculator-header p {
        color: #666;
        font-size: 1.05rem;
        max-width: 750px;
        margin: 0 auto;
        line-height: 1.5;
        font-family: Arial, sans-serif;
    }

    /* ===== DROPDOWN SELECTOR ===== */
    .custom-select {
        position: relative;
        max-width: 100%;
        margin: 20px auto;
    }

    .select-header {
        padding: 14px 18px;
        border: 2px solid #e2e8f0;
        border-radius: 12px;
        cursor: pointer;
        background: white;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 1.0625rem;
        color: #4a5568;
        transition: all 0.25s ease;
        font-family: Arial, sans-serif;
    }

    .select-header:hover {
        border-color: #4299e1;
        box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.15);
    }

    .select-options {
        display: none;
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background: white;
        border: 2px solid #e2e8f0;
        border-top: none;
        border-radius: 0 0 12px 12px;
        z-index: 1000;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        max-height: 350px;
        overflow: hidden;
    }

    /* ===== CONFIRM BUTTON INSIDE DROPDOWN ===== */
    .confirm-button-container {
        padding: 12px;
        border-bottom: 2px solid #f7fafc;
        text-align: right;
        background: #f8fafc;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .selection-info {
        color: #4a5568;
        font-size: 0.95rem;
        font-weight: 500;
    }

    .confirm-selection-btn {
        padding: 10px 24px;
        background: #4299e1;
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 1rem;
        font-weight: 600;
        transition: all 0.3s;
        font-family: Arial, sans-serif;
        min-width: 180px;
    }

    .confirm-selection-btn:hover:not(:disabled) {
        background: #3182ce;
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(49, 130, 206, 0.3);
    }

    .confirm-selection-btn:disabled {
        background: #cbd5e0;
        cursor: not-allowed;
    }

    .confirm-selection-btn.min-courses {
        background: #fc8181;
    }

    .confirm-selection-btn.min-courses:hover:not(:disabled) {
        background: #f56565;
    }

    /* ===== COURSE OPTIONS LIST ===== */
    .courses-list {
        max-height: 350px;
        overflow-y: auto;
    }

    .course-group {
        padding: 10px 0;
        border-bottom: 1px solid #e2e8f0;
    }

    .course-group-title {
        padding: 12px 18px;
        background: #f8fafc;
        font-weight: bold;
        color: #2d3748;
        font-size: 1.1rem;
        margin-bottom: 5px;
        border-left: 4px solid #4299e1;
    }

    .option-item {
        display: flex;
        align-items: center;
        padding: 14px 18px;
        cursor: pointer;
        border-bottom: 1px solid #f1f5f9;
        transition: background-color 0.2s;
        font-family: Arial, sans-serif;
    }

    .option-item:hover {
        background-color: #f7fafc;
    }

    .option-item input[type="checkbox"] {
        margin-right: 12px;
        width: 20px;
        height: 20px;
        accent-color: #4299e1;
        flex-shrink: 0;
    }

    .course-info {
        flex-grow: 1;
    }

    .course-name {
        font-weight: 600;
        color: #2d3748;
        margin-bottom: 4px;
        font-size: 1.125rem;
        font-family: Arial, sans-serif;
    }

    .course-price {
        color: #718096;
        font-size: 1rem;
        font-family: Arial, sans-serif;
    }

    .course-not-available {
        opacity: 0.6;
        cursor: not-allowed;
        position: relative;
    }

    .course-not-available::after {
        content: "Դեռ հասանելի չէ";
        position: absolute;
        right: 18px;
        top: 50%;
        transform: translateY(-50%);
        background: #a0aec0;
        color: white;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 0.8rem;
        font-weight: bold;
        white-space: nowrap;
    }

    .course-not-available input[type="checkbox"] {
        opacity: 0.5;
        cursor: not-allowed;
    }

    /* ===== SELECTED COURSES DISPLAY ===== */
    #selectedCoursesContainer {
        margin: 20px 0;
        display: none;
    }

    .selected-courses-title {
        text-align: center;
        margin-bottom: 15px;
        color: #2d3748;
        font-size: 1.25rem;
        font-family: Arial, sans-serif;
    }

    .selected-courses-wrapper {
        display: flex;
        flex-direction: column;
        gap: 6px;
        height: 220px; /* Fixed height - prevents outer scroll */
        overflow-y: auto;
        padding: 12px;
        border-radius: 12px;
        background: #f8fafc;
        border: 1px solid #e2e8f0;
        margin-bottom: 5px;
        
        /* Custom scrollbar styling */
        scrollbar-width: thin;
        scrollbar-color: #4299e1 #e2e8f0;
    }

    /* Custom scrollbar for Webkit browsers */
    .selected-courses-wrapper::-webkit-scrollbar {
        width: 8px;
    }

    .selected-courses-wrapper::-webkit-scrollbar-track {
        background: #e2e8f0;
        border-radius: 5px;
    }

    .selected-courses-wrapper::-webkit-scrollbar-thumb {
        background: #4299e1;
        border-radius: 5px;
        transition: background 0.3s;
    }

    .selected-courses-wrapper::-webkit-scrollbar-thumb:hover {
        background: #3182ce;
    }

    .selected-course-item {
        display: flex;
        align-items: flex-start;
        justify-content: space-between;
        gap: 10px;
        padding: 10px 12px;
        background: linear-gradient(90deg, #f0f9ff, #ffffff);
        border-radius: 8px;
        border-left: 4px solid #4299e1;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
        transition: all 0.2s;
        width: 100%;
        flex-shrink: 0;
    }

    .selected-course-item:hover {
        transform: translateY(-1px);
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
    }

    .course-name-text {
        font-weight: 600;
        color: #2d3748;
        font-size: 0.95rem;
        line-height: 1.4;
        flex-grow: 1;
        word-wrap: break-word;
        overflow-wrap: break-word;
        white-space: normal;
        overflow: visible;
    }

    .remove-course-btn {
        background: #fc8181;
        color: white;
        border: none;
        border-radius: 6px;
        padding: 6px 12px;
        cursor: pointer;
        font-size: 0.85rem;
        font-weight: 500;
        transition: all 0.2s;
        white-space: nowrap;
        font-family: Arial, sans-serif;
        flex-shrink: 0;
        margin-top: 2px;
        align-self: flex-start;
    }

    .remove-course-btn:hover {
        background: #f56565;
        transform: scale(1.05);
    }

    /* ===== PROMO CODE SECTION ===== */
    .promo-section {
        max-width: 100%;
        margin: 20px auto;
        padding: 15px;
        background: #f8fafc;
        border-radius: 12px;
        border: 2px solid #e2e8f0;
    }

    .promo-title {
        text-align: center;
        margin-bottom: 15px;
        color: #2d3748;
        font-size: 1.25rem;
        font-family: Arial, sans-serif;
    }

    .promo-input-wrapper {
        display: flex;
        gap: 12px;
        align-items: center;
    }

    .promo-input {
        flex: 1;
        padding: 14px 18px;
        border: 2px solid #e2e8f0;
        border-radius: 10px;
        font-size: 1.0625rem;
        transition: all 0.3s;
        text-align: center;
        color: #4a5568;
        font-family: Arial, sans-serif;
    }

    .promo-input:focus {
        outline: none;
        border-color: #4299e1;
        box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.2);
    }

    .promo-input::placeholder {
        color: #a0aec0;
    }

    .apply-promo-btn {
        padding: 14px 25px;
        background: #4299e1;
        color: white;
        border: none;
        border-radius: 10px;
        cursor: pointer;
        font-size: 1.0625rem;
        font-weight: 600;
        transition: all 0.3s;
        white-space: nowrap;
        font-family: Arial, sans-serif;
    }

    .apply-promo-btn:hover:not(:disabled) {
        background: #3182ce;
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(49, 130, 206, 0.3);
    }

    .apply-promo-btn:disabled {
        background: #cbd5e0;
        cursor: not-allowed;
    }

    #promoMessage {
        text-align: center;
        margin-top: 12px;
        min-height: 24px;
        font-size: 1rem;
        padding: 5px;
        font-family: Arial, sans-serif;
    }

    /* ===== RESULTS SECTION ===== */
    .results-container {
        background: linear-gradient(135deg, #e6fffa 0%, #f0fff4 100%);
        border-left: 6px solid #38b2ac;
        padding: 15px;
        border-radius: 12px;
        margin-top: 20px;
        text-align: center;
        font-family: Arial, sans-serif;
    }

    .total-amount {
        font-size: 1.8rem;
        font-weight: 800;
        color: #234e52;
        margin-bottom: 10px;
        line-height: 1.2;
        font-family: Arial, sans-serif;
    }

    #totalAmount {
        color: #2c7a7b;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .course-count {
        font-size: 1.25rem;
        color: #4a5568;
        margin-bottom: 12px;
        font-family: Arial, sans-serif;
    }

    .discount-info {
        font-size: 1rem;
        color: #4a5568;
        line-height: 1.6;
        background: rgba(255, 255, 255, 0.7);
        padding: 12px;
        border-radius: 8px;
        margin-top: 12px;
        font-family: Arial, sans-serif;
    }

    /* ===== FOOTER NOTE ===== */
    .footer-note {
        text-align: center;
        margin-top: 30px;
        color: #a0aec0;
        font-size: 1rem;
        padding-top: 15px;
        border-top: 1px solid #e2e8f0;
        font-family: Arial, sans-serif;
    }

    /* ===== RESPONSIVE DESIGN ===== */
    @media (max-width: 768px) {
        body {
            padding: 12px;
        }
        
        .course-calculator-page {
            max-width: 100% !important;
            padding: 15px !important;
            margin: 10px auto !important;
            border-radius: 15px !important;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.06) !important;
        }

        .calculator-header h1 {
            font-size: 1.5rem !important;
            line-height: 1.3 !important;
            margin-bottom: 10px !important;
        }

        .calculator-header p {
            font-size: 1rem !important;
            line-height: 1.5 !important;
        }

        .calculator-header {
            margin-bottom: 15px !important;
        }

        .custom-select {
            margin: 15px auto !important;
        }

        .select-header {
            padding: 12px 15px !important;
            font-size: 1rem !important;
        }

        .course-name {
            font-size: 1.125rem !important;
        }

        .confirm-button-container {
            flex-direction: column !important;
            gap: 10px !important;
            align-items: stretch !important;
        }

        .selection-info {
            text-align: center !important;
            order: 2 !important;
        }

        .confirm-selection-btn {
            order: 1 !important;
            width: 100% !important;
            min-width: auto !important;
        }

        .promo-input-wrapper {
            flex-direction: column !important;
            gap: 10px !important;
        }

        .promo-input, .apply-promo-btn {
            width: 100% !important;
            font-size: 1rem !important;
            padding: 12px 15px !important;
        }

        .total-amount {
            font-size: 1.5rem !important;
            line-height: 1.2 !important;
        }

        .course-count {
            font-size: 1.125rem !important;
        }
        
        /* Mobile adjustments for selected courses */
        .selected-courses-wrapper {
            height: 180px !important;
            padding: 10px !important;
        }
        
        .selected-course-item {
            padding: 8px 10px !important;
            flex-direction: column !important;
            align-items: flex-start !important;
            gap: 8px !important;
        }
        
        .course-name-text {
            font-size: 0.9rem !important;
            margin-bottom: 5px;
        }
        
        .remove-course-btn {
            align-self: flex-end !important;
            padding: 5px 10px !important;
            font-size: 0.8rem !important;
            margin-top: 0;
        }
        
        .option-item {
            padding: 12px 15px !important;
        }
        
        .results-container {
            padding: 12px !important;
            margin-top: 15px !important;
        }
        
        .discount-info {
            padding: 10px !important;
            font-size: 0.95rem !important;
        }
        
        .footer-note {
            margin-top: 25px !important;
            padding-top: 12px !important;
        }
        
        /* Fix for "Դեռ հասանելի չէ" on mobile */
        .course-not-available::after {
            position: static !important;
            transform: none !important;
            display: inline-block !important;
            margin-left: 10px !important;
            margin-top: 5px !important;
            top: auto !important;
            right: auto !important;
        }
        
        .course-not-available {
            flex-direction: column !important;
            align-items: flex-start !important;
        }
        
        .course-not-available .course-info {
            width: 100% !important;
        }
    }

    @media (max-width: 480px) {
        body {
            padding: 10px !important;
        }
        
        .course-calculator-page {
            padding: 12px !important;
            margin: 8px auto !important;
            border-radius: 12px !important;
        }

        .calculator-header h1 {
            font-size: 1.3rem !important;
        }

        .calculator-header p {
            font-size: 0.95rem !important;
        }

        .option-item {
            padding: 10px 12px !important;
        }
        
        .course-name {
            font-size: 1.0625rem !important;
        }

        .confirm-selection-btn, .apply-promo-btn {
            padding: 10px 12px !important;
            font-size: 0.95rem !important;
        }
        
        .selected-courses-wrapper {
            height: 150px !important;
            padding: 8px !important;
        }
        
        .selected-course-item {
            padding: 6px 8px !important;
        }
        
        .course-name-text {
            font-size: 0.85rem !important;
        }
        
        .selected-courses-title {
            font-size: 1.125rem !important;
            margin-bottom: 12px !important;
        }
        
        .results-container {
            padding: 10px !important;
        }
        
        .total-amount {
            font-size: 1.3rem !important;
        }
        
        .course-count {
            font-size: 1rem !important;
        }
        
        .discount-info {
            font-size: 0.9rem !important;
        }
        
        /* Smaller "Դեռ հասանելի չէ" on very small screens */
        .course-not-available::after {
            font-size: 0.7rem !important;
            padding: 3px 6px !important;
        }
        
        /* Smaller scrollbar on mobile */
        .selected-courses-wrapper::-webkit-scrollbar {
            width: 5px !important;
        }
    }
    </style>
</head>
<body>
    <section id="course-calculator" class="course-calculator-page">
        <div class="calculator-header">
            <h1>Դասընթացների փաթեթի արժեքի հաշվիչ</h1>
            <p>Ընտրեք դասընթացները, օգտվեք զեղչերից և հաշվեք ձեր խնայողությունները փաթեթի գնման դեպքում</p>
        </div>

        <!-- Course Selection Dropdown -->
        <div class="custom-select">
            <div class="select-header" id="dropdownTrigger">
                <span id="selectPlaceholder">Ընտրեք դասընթացները</span>
                <span style="color: #718096;">▼</span>
            </div>
            
            <div class="select-options" id="coursesDropdown">
                <!-- Confirmation Button -->
                <div class="confirm-button-container">
                    <div id="selectionInfo" class="selection-info">Ընտրված է 0 դասընթաց</div>
                    <button id="confirmButton" class="confirm-selection-btn" disabled>
                        Ընտրեք առնվազն 4-ը
                    </button>
                </div>
                
                <!-- Courses List -->
                <div class="courses-list">
                    <!-- Original Courses -->
                    <div class="course-group">
                        <div class="course-group-title">Հիմնական դասընթացներ</div>
                        
                        <label class="option-item" data-course-id="course1">
                            <input type="checkbox" value="course1">
                            <div class="course-info">
                                <div class="course-name">Շտեմարան 1, գլուխ 1</div>
                                <div class="course-price">5,900 դրամ</div>
                            </div>
                        </label>
                        
                        <label class="option-item" data-course-id="course2">
                            <input type="checkbox" value="course2">
                            <div class="course-info">
                                <div class="course-name">Շտեմարան 2, գլուխ 1</div>
                                <div class="course-price">11,900 դրամ</div>
                            </div>
                        </label>
                        
                        <label class="option-item" data-course-id="course3">
                            <input type="checkbox" value="course3">
                            <div class="course-info">
                                <div class="course-name">Շտեմարան 1, գլուխ 2</div>
                                <div class="course-price">34,900 դրամ</div>
                            </div>
                        </label>
                        
                        <label class="option-item" data-course-id="course4">
                            <input type="checkbox" value="course4">
                            <div class="course-info">
                                <div class="course-name">Շտեմարան 2, գլուխ 2</div>
                                <div class="course-price">54,900 դրամ</div>
                            </div>
                        </label>
                        
                        <label class="option-item" data-course-id="course5">
                            <input type="checkbox" value="course5">
                            <div class="course-info">
                                <div class="course-name">Շտեմարան 1 և 2․ Երկրաչափության բաժիններ</div>
                                <div class="course-price">64,900 դրամ</div>
                            </div>
                        </label>
                    </div>
                    
                    <!-- New Courses - Շտեմարան 1, Գլուխ 2 -->
                    <div class="course-group">
                        <div class="course-group-title">Շտեմարան 1, Գլուխ 2 - Բաժիններ</div>
                        
                        <label class="option-item" data-course-id="s1g2b1">
                            <input type="checkbox" value="s1g2b1">
                            <div class="course-info">
                                <div class="course-name">Բաժին 1. Արտահայտությունների ձևափոխություններ և արժեքների հաշվում</div>
                            </div>
                        </label>
                        
                        <label class="option-item" data-course-id="s1g2b2">
                            <input type="checkbox" value="s1g2b2">
                            <div class="course-info">
                                <div class="course-name">Բաժին 2. Հավասարումներ և անհավասարումներ</div>
                            </div>
                        </label>
                        
                        <label class="option-item" data-course-id="s1g2b3">
                            <input type="checkbox" value="s1g2b3">
                            <div class="course-info">
                                <div class="course-name">Բաժին 3. Տեքստային խնդիրներ</div>
                            </div>
                        </label>
                        
                        <label class="option-item" data-course-id="s1g2b4">
                            <input type="checkbox" value="s1g2b4">
                            <div class="course-info">
                                <div class="course-name">Բաժին 4. Պրոգրեսիաներ</div>
                            </div>
                        </label>
                        
                        <label class="option-item" data-course-id="s1g2b5">
                            <input type="checkbox" value="s1g2b5">
                            <div class="course-info">
                                <div class="course-name">Բաժին 5. Ֆունկցիաներ</div>
                            </div>
                        </label>
                        
                        <label class="option-item" data-course-id="s1g2b6">
                            <input type="checkbox" value="s1g2b6">
                            <div class="course-info">
                                <div class="course-name">Բաժին 6. Հարթաչափություն</div>
                            </div>
                        </label>
                        
                        <label class="option-item" data-course-id="s1g2b7">
                            <input type="checkbox" value="s1g2b7">
                            <div class="course-info">
                                <div class="course-name">Բաժին 7. Տարածաչափություն</div>
                            </div>
                        </label>
                        
                        <label class="option-item" data-course-id="s1g2b8">
                            <input type="checkbox" value="s1g2b8">
                            <div class="course-info">
                                <div class="course-name">Բաժին 8. Միացություններ</div>
                            </div>
                        </label>
                    </div>
                    
                    <!-- New Courses - Շտեմարան 1, Գլուխ 3 -->
                    <div class="course-group">
                        <div class="course-group-title">Շտեմարան 1, Գլուխ 3 - Բաժիններ</div>
                        
                        <label class="option-item course-not-available" data-course-id="s1g3b1">
                            <input type="checkbox" value="s1g3b1" disabled>
                            <div class="course-info">
                                <div class="course-name">Բաժին 1. Հավասարումներ և անհավասարումներ</div>
                            </div>
                        </label>
                        
                        <label class="option-item course-not-available" data-course-id="s1g3b2">
                            <input type="checkbox" value="s1g3b2" disabled>
                            <div class="course-info">
                                <div class="course-name">Բաժին 2. Ֆունկցիաներ</div>
                            </div>
                        </label>
                        
                        <label class="option-item" data-course-id="s1g3b3">
                            <input type="checkbox" value="s1g3b3">
                            <div class="course-info">
                                <div class="course-name">Բաժին 3. Հարթաչափություն</div>
                            </div>
                        </label>
                        
                        <label class="option-item" data-course-id="s1g3b4">
                            <input type="checkbox" value="s1g3b4">
                            <div class="course-info">
                                <div class="course-name">Բաժին 4. Տարածաչափություն</div>
                            </div>
                        </label>
                    </div>
                    
                    <!-- New Courses - Շտեմարան 2, Գլուխ 2 -->
                    <div class="course-group">
                        <div class="course-group-title">Շտեմարան 2, Գլուխ 2 - Բաժիններ</div>
                        
                        <label class="option-item" data-course-id="s2g2b1">
                            <input type="checkbox" value="s2g2b1">
                            <div class="course-info">
                                <div class="course-name">Բաժին 1. Արտահայտությունների ձևափոխություններ և արժեքների հաշվում</div>
                            </div>
                        </label>
                        
                        <label class="option-item" data-course-id="s2g2b2">
                            <input type="checkbox" value="s2g2b2">
                            <div class="course-info">
                                <div class="course-name">Բաժին 2. Հավասարումներ և անհավասարումներ</div>
                            </div>
                        </label>
                        
                        <label class="option-item" data-course-id="s2g2b3">
                            <input type="checkbox" value="s2g2b3">
                            <div class="course-info">
                                <div class="course-name">Բաժին 3. Տեքստային խնդիրներ</div>
                            </div>
                        </label>
                        
                        <label class="option-item" data-course-id="s2g2b4">
                            <input type="checkbox" value="s2g2b4">
                            <div class="course-info">
                                <div class="course-name">Բաժին 4. Ֆունկցիաներ</div>
                            </div>
                        </label>
                        
                        <label class="option-item" data-course-id="s2g2b5">
                            <input type="checkbox" value="s2g2b5">
                            <div class="course-info">
                                <div class="course-name">Բաժին 5. Հարթաչափություն</div>
                            </div>
                        </label>
                        
                        <label class="option-item" data-course-id="s2g2b6">
                            <input type="checkbox" value="s2g2b6">
                            <div class="course-info">
                                <div class="course-name">Բաժին 6. Տարածաչափություն</div>
                            </div>
                        </label>
                        
                        <label class="option-item" data-course-id="s2g2b7">
                            <input type="checkbox" value="s2g2b7">
                            <div class="course-info">
                                <div class="course-name">Բաժին 7. Կոորդինատների մեթոդ, վեկտորներ</div>
                            </div>
                        </label>
                        
                        <label class="option-item" data-course-id="s2g2b8">
                            <input type="checkbox" value="s2g2b8">
                            <div class="course-info">
                                <div class="course-name">Բաժին 8. Միացություններ</div>
                            </div>
                        </label>
                    </div>
                    
                    <!-- New Courses - Շտեմարան 2, Գլուխ 3 -->
                    <div class="course-group">
                        <div class="course-group-title">Շտեմարան 2, Գլուխ 3 - Բաժիններ</div>
                        
                        <label class="option-item course-not-available" data-course-id="s2g3b1">
                            <input type="checkbox" value="s2g3b1" disabled>
                            <div class="course-info">
                                <div class="course-name">Բաժին 1. Թվաբանական առաջադրանքներ</div>
                            </div>
                        </label>
                        
                        <label class="option-item course-not-available" data-course-id="s2g3b2">
                            <input type="checkbox" value="s2g3b2" disabled>
                            <div class="course-info">
                                <div class="course-name">Բաժին 2. Հավասարումներ և անհավասարումներ</div>
                            </div>
                        </label>
                        
                        <label class="option-item course-not-available" data-course-id="s2g3b3">
                            <input type="checkbox" value="s2g3b3" disabled>
                            <div class="course-info">
                                <div class="course-name">Բաժին 3. Պրոգրեսիաներ</div>
                            </div>
                        </label>
                        
                        <label class="option-item course-not-available" data-course-id="s2g3b4">
                            <input type="checkbox" value="s2g3b4" disabled>
                            <div class="course-info">
                                <div class="course-name">Բաժին 4. Ֆունկցիաներ</div>
                            </div>
                        </label>
                        
                        <label class="option-item" data-course-id="s2g3b5">
                            <input type="checkbox" value="s2g3b5">
                            <div class="course-info">
                                <div class="course-name">Բաժին 5. Հարթաչափություն</div>
                            </div>
                        </label>
                        
                        <label class="option-item" data-course-id="s2g3b6">
                            <input type="checkbox" value="s2g3b6">
                            <div class="course-info">
                                <div class="course-name">Բաժին 6. Տարածաչափություն</div>
                            </div>
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <!-- Selected Courses Display -->
        <div id="selectedCoursesContainer">
            <h3 class="selected-courses-title">Ընտրված դասընթացները</h3>
            <div id="selectedCoursesList">
                <!-- Selected courses will appear here dynamically -->
            </div>
        </div>

        <!-- Promo Code Section -->
        <div class="promo-section">
            <h3 class="promo-title">Պրոմո կոդ (եթե ունեք)</h3>
            <div class="promo-input-wrapper">
                <input type="text" id="promoCode" class="promo-input" placeholder="Մուտքագրեք պրոմո կոդը">
                <button id="applyPromoButton" class="apply-promo-btn" disabled>
                    Կիրառել
                </button>
            </div>
            <div id="promoMessage"></div>
        </div>

        <!-- Results -->
        <div id="result" class="results-container">
            <div class="total-amount">
                Ընդհանուր արժեքը՝ <span id="totalAmount">0</span> դրամ
            </div>
            <div id="courseCountText" class="course-count"></div>
            <div id="discountInfo" class="discount-info"></div>
        </div>

        <div class="footer-note">
            <p>Հաշվիչը ստեղծվել է հատուկ dimordi-uxecuyc.am կայքի համար</p>
        </div>
    </section>

    <script>
        // ==================== COURSE DATA ====================
        const courses = {
            // Original courses with their actual prices
            course1: { name: 'Շտեմարան 1, գլուխ 1', price: 5900 },
            course2: { name: 'Շտեմարան 2, գլուխ 1', price: 11900 },
            course3: { name: 'Շտեմարան 1, գլուխ 2', price: 34900 },
            course4: { name: 'Շտեմարան 2, գլուխ 2', price: 54900 },
            course5: { name: 'Շտեմարան 1 և 2․ Երկրաչափության բաժիններ', price: 64900 },
            
            // New courses - Շտեմարան 1, Գլուխ 2 (temporary 22000 price for calculation)
            s1g2b1: { name: 'ՇՏԵՄԱՐԱՆ 1, ԳԼՈՒԽ 2, ԲԱԺԻՆ 1. Արտահայտությունների ձևափոխություններ և արժեքների հաշվում', basePrice: 4000 },
            s1g2b2: { name: 'ՇՏԵՄԱՐԱՆ 1, ԳԼՈՒԽ 2, ԲԱԺԻՆ 2. Հավասարումներ և անհավասարումներ', basePrice: 5000 },
            s1g2b3: { name: 'ՇՏԵՄԱՐԱՆ 1, ԳԼՈՒԽ 2, ԲԱԺԻՆ 3. Տեքստային խնդիրներ', basePrice: 4000 },
            s1g2b4: { name: 'ՇՏԵՄԱՐԱՆ 1, ԳԼՈՒԽ 2, ԲԱԺԻՆ 4. Պրոգրեսիաներ', basePrice: 4000 },
            s1g2b5: { name: 'ՇՏԵՄԱՐԱՆ 1, ԳԼՈՒԽ 2, ԲԱԺԻՆ 5. Ֆունկցիաներ', basePrice: 5000 },
            s1g2b6: { name: 'ՇՏԵՄԱՐԱՆ 1, ԳԼՈՒԽ 2, ԲԱԺԻՆ 6. Հարթաչափություն', basePrice: 5000 },
            s1g2b7: { name: 'ՇՏԵՄԱՐԱՆ 1, ԳԼՈՒԽ 2, ԲԱԺԻՆ 7. Տարածաչափություն', basePrice: 5000 },
            s1g2b8: { name: 'ՇՏԵՄԱՐԱՆ 1, ԳԼՈՒԽ 2, ԲԱԺԻՆ 8. Միացություններ', basePrice: 5000 },
            
            // New courses - Շտեմարան 1, Գլուխ 3 (only available ones)
            s1g3b3: { name: 'ՇՏԵՄԱՐԱՆ 1, ԳԼՈՒԽ 3, ԲԱԺԻՆ 3. Հարթաչափություն', basePrice: 9000 },
            s1g3b4: { name: 'ՇՏԵՄԱՐԱՆ 1, ԳԼՈՒԽ 3, ԲԱԺԻՆ 4. Տարածաչափություն', basePrice: 9000 },
            
            // New courses - Շտեմարան 2, Գլուխ 2
            s2g2b1: { name: 'ՇՏԵՄԱՐԱՆ 2, ԳԼՈՒԽ 2, ԲԱԺԻՆ 1. Արտահայտությունների ձևափոխություններ և արժեքների հաշվում', basePrice: 5000 },
            s2g2b2: { name: 'ՇՏԵՄԱՐԱՆ 2, ԳԼՈՒԽ 2, ԲԱԺԻՆ 2. Հավասարումներ և անհավասարումներ', basePrice: 9000 },
            s2g2b3: { name: 'ՇՏԵՄԱՐԱՆ 2, ԳԼՈՒԽ 2, ԲԱԺԻՆ 3. Տեքստային խնդիրներ', basePrice: 4000 },
            s2g2b4: { name: 'ՇՏԵՄԱՐԱՆ 2, ԳԼՈՒԽ 2, ԲԱԺԻՆ 4. Ֆունկցիաներ', basePrice: 8000 },
            s2g2b5: { name: 'ՇՏԵՄԱՐԱՆ 2, ԳԼՈՒԽ 2, ԲԱԺԻՆ 5. Հարթաչափություն', basePrice: 9000 },
            s2g2b6: { name: 'ՇՏԵՄԱՐԱՆ 2, ԳԼՈՒԽ 2, ԲԱԺԻՆ 6. Տարածաչափություն', basePrice: 9000 },
            s2g2b7: { name: 'ՇՏԵՄԱՐԱՆ 2, ԳԼՈՒԽ 2, ԲԱԺԻՆ 7. Կոորդինատների մեթոդ, վեկտորներ', basePrice: 4000 },
            s2g2b8: { name: 'ՇՏԵՄԱՐԱՆ 2, ԳԼՈՒԽ 2, ԲԱԺԻՆ 8. Միացություններ', basePrice: 9000 },
            
            // New courses - Շտեմարան 2, Գլուխ 3 (only available ones)
            s2g3b5: { name: 'ՇՏԵՄԱՐԱՆ 2, ԳԼՈՒԽ 3, ԲԱԺԻՆ 5. Հարթաչափություն', basePrice: 11000 },
            s2g3b6: { name: 'ՇՏԵՄԱՐԱՆ 2, ԳԼՈՒԽ 3, ԲԱԺԻՆ 6. Տարածաչափություն', basePrice: 11000 }
        };

        // ==================== APPLICATION STATE ====================
        let selectedCourses = [];
        let currentPromoCode = '';
        const VALID_PROMO_CODES = { 'PROMO10': 0.10 };
        const MIN_COURSES_REQUIRED = 4;

        // ==================== DOM ELEMENTS ====================
        const dropdownTrigger = document.getElementById('dropdownTrigger');
        const coursesDropdown = document.getElementById('coursesDropdown');
        const selectPlaceholder = document.getElementById('selectPlaceholder');
        const confirmButton = document.getElementById('confirmButton');
        const selectionInfo = document.getElementById('selectionInfo');
        const selectedCoursesContainer = document.getElementById('selectedCoursesContainer');
        const selectedCoursesList = document.getElementById('selectedCoursesList');
        const promoCodeInput = document.getElementById('promoCode');
        const applyPromoButton = document.getElementById('applyPromoButton');
        const promoMessage = document.getElementById('promoMessage');
        const totalAmountDisplay = document.getElementById('totalAmount');
        const courseCountText = document.getElementById('courseCountText');
        const discountInfo = document.getElementById('discountInfo');

        // ==================== DROPDOWN FUNCTIONS ====================
        dropdownTrigger.addEventListener('click', function(event) {
            event.stopPropagation();
            const isVisible = coursesDropdown.style.display === 'block';
            coursesDropdown.style.display = isVisible ? 'none' : 'block';
            
            if (!isVisible) {
                dropdownTrigger.style.borderColor = '#4299e1';
                dropdownTrigger.style.boxShadow = '0 0 0 3px rgba(66, 153, 225, 0.2)';
            } else {
                dropdownTrigger.style.borderColor = '#e2e8f0';
                dropdownTrigger.style.boxShadow = 'none';
            }
        });

        document.addEventListener('click', function(event) {
            if (!event.target.closest('.custom-select')) {
                coursesDropdown.style.display = 'none';
                dropdownTrigger.style.borderColor = '#e2e8f0';
                dropdownTrigger.style.boxShadow = 'none';
            }
        });

        // ==================== CHECKBOX & BUTTON UPDATES ====================
        function updateConfirmButton() {
            const checkboxes = document.querySelectorAll('.select-options input[type="checkbox"]:not(:disabled)');
            let selectedCount = 0;
            
            checkboxes.forEach(checkbox => {
                if (checkbox.checked) selectedCount++;
            });
            
            // Update selection info
            selectionInfo.textContent = `Ընտրված է ${selectedCount} դասընթաց`;
            
            if (selectedCount >= MIN_COURSES_REQUIRED) {
                confirmButton.textContent = 'Հաստատել ընտրությունը';
                confirmButton.classList.remove('min-courses');
                confirmButton.disabled = false;
                confirmButton.style.background = '#4299e1';
            } else if (selectedCount > 0) {
                confirmButton.textContent = `Ընտրեք առնվազն ${MIN_COURSES_REQUIRED}-ը`;
                confirmButton.classList.add('min-courses');
                confirmButton.disabled = true;
                confirmButton.style.background = '#fc8181';
            } else {
                confirmButton.textContent = `Ընտրեք առնվազն ${MIN_COURSES_REQUIRED}-ը`;
                confirmButton.classList.add('min-courses');
                confirmButton.disabled = true;
                confirmButton.style.background = '#cbd5e0';
            }
        }

        function updatePromoButton() {
            const promoCode = promoCodeInput.value.trim();
            
            if (promoCode.length > 0) {
                applyPromoButton.style.background = '#4299e1';
                applyPromoButton.disabled = false;
            } else {
                applyPromoButton.style.background = '#cbd5e0';
                applyPromoButton.disabled = true;
            }
        }

        // ==================== EVENT LISTENERS ====================
        document.querySelectorAll('.select-options input[type="checkbox"]:not(:disabled)').forEach(checkbox => {
            checkbox.addEventListener('change', updateConfirmButton);
        });

        confirmButton.addEventListener('click', function() {
            const checkboxes = document.querySelectorAll('.select-options input[type="checkbox"]:not(:disabled)');
            let selectedCount = 0;
            
            checkboxes.forEach(checkbox => {
                if (checkbox.checked) selectedCount++;
            });
            
            if (selectedCount < MIN_COURSES_REQUIRED) {
                // Show error message
                this.style.background = '#fc8181';
                this.textContent = `Ընտրեք առնվազն ${MIN_COURSES_REQUIRED} դասընթաց`;
                
                setTimeout(() => {
                    updateConfirmButton();
                }, 1500);
                return;
            }
            
            // If enough courses are selected, proceed
            this.style.background = '#38a169';
            this.textContent = 'Հաստատված ✓';
            
            setTimeout(() => {
                updateConfirmButton();
            }, 1000);
            
            processCourseSelection();
        });

        promoCodeInput.addEventListener('input', function() {
            updatePromoButton();
            if (this.value.trim() !== currentPromoCode) {
                this.style.borderColor = '#e2e8f0';
                promoMessage.textContent = '';
            }
        });

        promoCodeInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && !applyPromoButton.disabled) {
                applyPromoCode();
            }
        });

        applyPromoButton.addEventListener('click', applyPromoCode);

        // ==================== CORE LOGIC FUNCTIONS ====================
        function processCourseSelection() {
            const checkboxes = document.querySelectorAll('.select-options input[type="checkbox"]:not(:disabled)');
            selectedCourses = [];
            
            checkboxes.forEach(checkbox => {
                if (checkbox.checked) {
                    const courseId = checkbox.value;
                    if (courses[courseId]) {
                        selectedCourses.push({
                            id: courseId,
                            name: courses[courseId].name
                        });
                    }
                }
            });
            
            if (selectedCourses.length >= MIN_COURSES_REQUIRED) {
                selectPlaceholder.textContent = `Ընտրված է ${selectedCourses.length} դասընթաց`;
                selectPlaceholder.style.color = '#2d3748';
                selectPlaceholder.style.fontWeight = '500';
            } else {
                selectPlaceholder.textContent = 'Ընտրեք դասընթացները';
                selectPlaceholder.style.color = '#718096';
                selectPlaceholder.style.fontWeight = 'normal';
            }
            
            coursesDropdown.style.display = 'none';
            dropdownTrigger.style.borderColor = '#e2e8f0';
            dropdownTrigger.style.boxShadow = 'none';
            
            updateSelectedCoursesList();
            calculateTotal();
        }

        function updateSelectedCoursesList() {
            if (selectedCourses.length > 0) {
                selectedCoursesList.innerHTML = `
                    <div class="selected-courses-wrapper">
                        ${selectedCourses.map(course => `
                            <div class="selected-course-item">
                                <div class="course-name-text">
                                    ${course.name}
                                </div>
                                <button class="remove-course-btn" data-course-id="${course.id}">
                                    Ջնջել
                                </button>
                            </div>
                        `).join('')}
                    </div>
                `;
                
                selectedCoursesContainer.style.display = 'block';
                
                document.querySelectorAll('.remove-course-btn').forEach(button => {
                    button.addEventListener('click', function() {
                        const courseId = this.getAttribute('data-course-id');
                        removeCourse(courseId);
                    });
                });
            } else {
                selectedCoursesContainer.style.display = 'none';
            }
        }

        function removeCourse(courseId) {
            selectedCourses = selectedCourses.filter(course => course.id !== courseId);
            
            const checkbox = document.querySelector(`input[value="${courseId}"]`);
            if (checkbox) {
                checkbox.checked = false;
            }
            
            updateConfirmButton();
            updateSelectedCoursesList();
            
            if (selectedCourses.length >= MIN_COURSES_REQUIRED) {
                selectPlaceholder.textContent = `Ընտրված է ${selectedCourses.length} դասընթաց`;
            } else {
                selectPlaceholder.textContent = 'Ընտրեք դասընթացները';
                selectPlaceholder.style.color = '#718096';
                selectPlaceholder.style.fontWeight = 'normal';
            }
            
            calculateTotal();
        }

        function applyPromoCode() {
            const promoCode = promoCodeInput.value.trim();
            
            if (promoCode === 'PROMO10') {
                currentPromoCode = promoCode;
                promoCodeInput.style.borderColor = '#38a169';
                promoMessage.style.color = '#38a169';
                promoMessage.innerHTML = '<strong>Պրոմո կոդը հաստատված է:</strong> Դուք կստանաք լրացուցիչ 10% զեղչ:';
                
                // Apply green color permanently for valid promo
                applyPromoButton.style.background = '#38a169';
                applyPromoButton.textContent = 'Կիրառված է';
                applyPromoButton.disabled = true;
                
                // Only reset if user clears the promo code input
                promoCodeInput.addEventListener('input', function onPromoInputChange() {
                    if (this.value.trim() !== currentPromoCode) {
                        // Reset promo state if user changes the input
                        currentPromoCode = '';
                        applyPromoButton.style.background = '#4299e1';
                        applyPromoButton.textContent = 'Կիրառել կոդը';
                        applyPromoButton.disabled = false;
                        promoCodeInput.style.borderColor = '#e2e8f0';
                        promoMessage.textContent = '';
                        
                        // Remove this event listener to avoid multiple bindings
                        this.removeEventListener('input', onPromoInputChange);
                        calculateTotal();
                    }
                });
                
            } else if (promoCode === '') {
                currentPromoCode = '';
                promoCodeInput.style.borderColor = '#e2e8f0';
                promoMessage.textContent = '';
                applyPromoButton.style.background = '#4299e1';
                applyPromoButton.textContent = 'Կիրառել';
            } else {
                currentPromoCode = '';
                promoCodeInput.style.borderColor = '#fc8181';
                promoMessage.style.color = '#c53030';
                promoMessage.textContent = 'Պրոմո կոդը անվավեր է:';
                
                // Reset button after showing error (optional)
                setTimeout(() => {
                    if (promoCodeInput.value.trim() !== 'PROMO10') {
                        applyPromoButton.style.background = '#4299e1';
                        applyPromoButton.textContent = 'Կիրառել կոդը';
                    }
                }, 1500);
            }
            
            calculateTotal();
        }

        function calculateTotal() {
            const courseCount = selectedCourses.length;
            
            if (courseCount >= MIN_COURSES_REQUIRED) {
                // Calculate total price
                let total = 0;
                
                // Count original courses and new courses separately
                let originalCoursesCount = 0;
                let newCoursesCount = 0;
                
                selectedCourses.forEach(course => {
                    const courseId = course.id;
                    if (courseId.startsWith('course')) {
                        // Original course - use actual price
                        total += courses[courseId].price || 0;
                        originalCoursesCount++;
                    } else {
                        // New course - use its individual base price
                        total += courses[courseId].basePrice || 0;
                        newCoursesCount++;
                    }
                });
                
                // Calculate quantity discount based on your specified ranges
                let quantityDiscount = 0;
                let quantityDiscountText = '';
                let discountPercentage = 0;
                
                if (courseCount >= 4 && courseCount <= 5) {
                    discountPercentage = 0.05;
                    quantityDiscountText = '5% զեղչ 4-5 դասընթացի համար';
                } else if (courseCount >= 6 && courseCount <= 8) {
                    discountPercentage = 0.07;
                    quantityDiscountText = '7% զեղչ 6-8 դասընթացի համար';
                } else if (courseCount >= 9 && courseCount <= 10) {
                    discountPercentage = 0.10;
                    quantityDiscountText = '10% զեղչ 9-10 դասընթացի համար';
                } else if (courseCount > 10) {
                    discountPercentage = 0.12;
                    quantityDiscountText = '12% զեղչ 10+ դասընթացի համար';
                }
                
                quantityDiscount = total * discountPercentage;
                
                let promoDiscount = 0;
                if (currentPromoCode && VALID_PROMO_CODES[currentPromoCode]) {
                    promoDiscount = (total - quantityDiscount) * VALID_PROMO_CODES[currentPromoCode];
                }
                
                const finalTotal = total - quantityDiscount - promoDiscount;
                totalAmountDisplay.textContent = finalTotal.toLocaleString('hy-AM');
                
                // Calculate base price for display (individual prices per course)
                const basePriceDisplay = total;
                
                let discountHTML = '';
                discountHTML = '<div style="text-align: left; max-width: 500px; margin: 0 auto;">';
                
                // Show base price
                discountHTML += `<div style="margin-bottom: 8px;">Սկզբնական գինը՝ <span style="font-weight: 600;">${basePriceDisplay.toLocaleString('hy-AM')} դրամ</span></div>`;
                
                if (quantityDiscount > 0) {
                    discountHTML += `<div style="color: #2c7a7b; margin-bottom: 8px;">${quantityDiscountText}: <span style="font-weight: 600;">-${quantityDiscount.toLocaleString('hy-AM')} դրամ</span></div>`;
                }
                
                if (promoDiscount > 0) {
                    discountHTML += `<div style="color: #2c7a7b; margin-bottom: 8px;">10% լրացուցիչ զեղչ պրոմո կոդով: <span style="font-weight: 600;">-${promoDiscount.toLocaleString('hy-AM')} դրամ</span></div>`;
                }
                
                const totalDiscount = quantityDiscount + promoDiscount;
                const discountPercent = total > 0 ? Math.round((totalDiscount / total) * 100) : 0;
                
                discountHTML += `<div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid #c6f6d5; color: #234e52;">`;
                discountHTML += `Ընդհանուր խնայողությունը՝ <span style="font-weight: 600;">${totalDiscount.toLocaleString('hy-AM')} դրամ</span>`;
                discountHTML += `</div></div>`;
                
                discountInfo.innerHTML = discountHTML;
            } else {
                totalAmountDisplay.textContent = '0';
                if (courseCount > 0) {
                    discountInfo.innerHTML = 'Ընտրեք առնվազն 4 դասընթաց գինը հաշվելու համար։';
                } else {
                    discountInfo.innerHTML = 'Ընտրեք դասընթացներ զեղչերի կիրառման համար։';
                }
            }
            
            courseCountText.textContent = courseCount > 0 
                ? `Ընտրված է ${courseCount} դասընթաց` 
                : 'Դեռևս դասընթաց չի ընտրվել';
        }

        // ==================== INITIALIZATION ====================
        document.addEventListener('DOMContentLoaded', function() {
            updateConfirmButton();
            updatePromoButton();
            calculateTotal();
            
            console.log('Dimordi Course Calculator loaded successfully!');
        });
    </script>
</body>
</html>
